heat_template_version: queens

description: Network Service Descriptor (Final Version)

resources:
  #
  # Node 'vl_mgmt_network' of type 'tosca.nodes.nfv.NsVirtualLink' translated into the following resource(s):
  #

  vl_mgmt_network:
    type: OS::Neutron::Net
    properties:
#     admin_state_up: true # default value
#     dhcp_agent_ids: [] # default value
#     dns_domain: DNS_DOMAIN
#     name: vl_mgmt_network # set by Heat engine
#     port_security_enabled: true # default value
#     qos_policy: QOS_POLICY_ID_OR_NAME
      shared: false # default value
#     tags: [] # default value
#     value_specs: {} # default value
    metadata:
      tosca.type: tosca.nodes.nfv.NsVirtualLink
      connectivity_type.layer_protocols: ['ipv4']
      connectivity_type.flow_pattern: mesh
      vl_profile.max_bitrate_requirements.root: 1000000
      vl_profile.min_bitrate_requirements.root: 100000

  vl_mgmt_network_root_qos_policy:
    type: OS::Neutron::QoSPolicy
    properties:
      description: QoS policy for root ports of network vl_mgmt_network
#     name: vl_mgmt_network root QoS Policy # set by Heat engine
#     shared: false # default value

  vl_mgmt_network_root_qos_bandwidth_limit_rule:
    type: OS::Neutron::QoSBandwidthLimitRule
    properties:
      policy: { get_resource: vl_mgmt_network_root_qos_policy }
      max_kbps: 1000
#     max_burst_kbps: 1000

  vl_mgmt_network_leaf_qos_policy:
    type: OS::Neutron::QoSPolicy
    properties:
      description: QoS policy for leaf ports of network vl_mgmt_network
#     name: vl_mgmt_network root QoS Policy # set by Heat engine
#     shared: false # default value

  vl_mgmt_network_subnet_ipv4:
    type: OS::Neutron::Subnet
    properties:
      network: { get_resource: vl_mgmt_network }
#     allocation_pools: [] # default value
      cidr: 10.100.0.0/24  # generated
#     enable_dhcp: true # default value
#     gateway_ip: GATEWAY_IP
#     host_routes: {} # default value
      ip_version: 4
#     ipv6_address_mode: ""
#     ipv6_ra_mode: ""
#     name: vl_mgmt_network-subnet-ipv4 # set by Heat engine
#     prefixlen: integer
#     segment: segment_id
#     subnetpool: subnetpool_id
#     tags: [] # default value
#     value_specs: {} # default value

  #
  # Node 'vl_data_network' of type 'tosca.nodes.nfv.NsVirtualLink' translated into the following resource(s):
  #

  vl_data_network:
    type: OS::Neutron::Net
    properties:
#     admin_state_up: true # default value
#     dhcp_agent_ids: [] # default value
#     dns_domain: DNS_DOMAIN
#     name: vl_data_network # set by Heat engine
#     port_security_enabled: true # default value
#     qos_policy: QOS_POLICY_ID_OR_NAME
      shared: false # default value
#     tags: [] # default value
#     value_specs: {} # default value
    metadata:
      tosca.type: tosca.nodes.nfv.NsVirtualLink
      connectivity_type.layer_protocols: ['ipv4']
      connectivity_type.flow_pattern: line
      vl_profile.max_bitrate_requirements.root: 10000000
      vl_profile.min_bitrate_requirements.root: 1000000

  vl_data_network_root_qos_policy:
    type: OS::Neutron::QoSPolicy
    properties:
      description: QoS policy for root ports of network vl_data_network
#     name: vl_data_network root QoS Policy # set by Heat engine
#     shared: false # default value

  vl_data_network_root_qos_bandwidth_limit_rule:
    type: OS::Neutron::QoSBandwidthLimitRule
    properties:
      policy: { get_resource: vl_data_network_root_qos_policy }
      max_kbps: 10000
#     max_burst_kbps: 10000

  vl_data_network_leaf_qos_policy:
    type: OS::Neutron::QoSPolicy
    properties:
      description: QoS policy for leaf ports of network vl_data_network
#     name: vl_data_network root QoS Policy # set by Heat engine
#     shared: false # default value

  vl_data_network_subnet_ipv4:
    type: OS::Neutron::Subnet
    properties:
      network: { get_resource: vl_data_network }
#     allocation_pools: [] # default value
      cidr: 10.100.1.0/24  # generated
#     enable_dhcp: true # default value
#     gateway_ip: GATEWAY_IP
#     host_routes: {} # default value
      ip_version: 4
#     ipv6_address_mode: ""
#     ipv6_ra_mode: ""
#     name: vl_data_network-subnet-ipv4 # set by Heat engine
#     prefixlen: integer
#     segment: segment_id
#     subnetpool: subnetpool_id
#     tags: [] # default value
#     value_specs: {} # default value

  #
  # Node 'vnf1_instance' of type 'tosca.nodes.nfv.Firewall_VNF' translated into the following resource(s):
  #

  vnf1_instance:
    type: VNF1-scalable.yaml
    properties:
      flavour_id: scalable_ha
      virtual_link: { get_resource: vl_mgmt_network }
      virtual_link_external: { get_resource: vl_mgmt_network }
    metadata:
      tosca.type: tosca.nodes.nfv.Firewall_VNF

  #
  # Node 'vnf2_instance' of type 'tosca.nodes.nfv.IDS_VNF' translated into the following resource(s):
  #

  vnf2_instance:
    type: VNF2-scalable.yaml
    properties:
      flavour_id: scalable_ha
      virtual_link: { get_resource: vl_data_network }
      virtual_link_external: { get_resource: vl_mgmt_network }
    metadata:
      tosca.type: tosca.nodes.nfv.IDS_VNF

  #
  # Node 'cnf_instance' of type 'tosca.nodes.nfv.Proxy_CNF' translated into the following resource(s):
  #

  cnf_instance:
    type: CNF3-scalable.yaml
    properties:
      flavour_id: scalable_ha_container
      virtual_link: { get_resource: vl_data_network }
      virtual_link_external: { get_resource: vl_mgmt_network }
    metadata:
      tosca.type: tosca.nodes.nfv.Proxy_CNF

  #
  # Node 'sap_mgmt' of type 'tosca.nodes.nfv.Sap' translated into the following resource(s):
  #

  sap_mgmt:
    type: OS::Neutron::Router
#   properties:
#     admin_state_up: true # default value
#     distributed: false # default value?
#     ha: false# default value?
#     l3_agent_ids: [] # default value
#     name: sap_mgmt  # set by Heat engine
#     tags: [] # default value
#     value_specs: {} # default value
    metadata:
      tosca.type: tosca.nodes.nfv.Sap
      layer_protocols: ['ipv4']
      role: root

  sap_mgmt_internal_virtual_link_ipv4_port:
    type: OS::Neutron::Port
    properties:
      network: { get_resource: vl_mgmt_network }
#     admin_state_up: true  # default value
#     allowed_address_pairs: []  # default value
#     binding:vnic_type: normal # TODO
#     device_id: "" # default value
#     device_owner: "" # default value
#     dns_name: "" # TODO
      fixed_ips:
        - subnet: { get_resource: vl_mgmt_network_subnet_ipv4 }
#     mac_address: MAC_ADDRESS
#     name: # set by Heat Engine
#     port_security_enabled: true # default value
      qos_policy: { get_resource: vl_mgmt_network_root_qos_policy }
#     security_groups: [ SECURITY_GROUP ]
#     tags: [] # default value
#     value_specs: {} # default value

  sap_mgmt_internal_virtual_link_ipv4:
    type: OS::Neutron::RouterInterface
    properties:
      router: { get_resource: sap_mgmt }
      port: { get_resource: sap_mgmt_internal_virtual_link_ipv4_port }

  sap_mgmt_external_virtual_link_ipv4_port:
    type: OS::Neutron::Port
    properties:
      network: { get_resource: None }
#     admin_state_up: true  # default value
#     allowed_address_pairs: []  # default value
#     binding:vnic_type: normal # TODO
#     device_id: "" # default value
#     device_owner: "" # default value
#     dns_name: "" # TODO
      fixed_ips:
        - subnet: { get_resource: None_subnet_ipv4 }
#     mac_address: MAC_ADDRESS
#     name: # set by Heat Engine
#     port_security_enabled: true # default value
      qos_policy: { get_resource: None_root_qos_policy }
#     security_groups: [ SECURITY_GROUP ]
#     tags: [] # default value
#     value_specs: {} # default value

  sap_mgmt_external_virtual_link_ipv4:
    type: OS::Neutron::RouterInterface
    properties:
      router: { get_resource: sap_mgmt }
      port: { get_resource: sap_mgmt_external_virtual_link_ipv4_port }

  #
  # Node 'sap_data' of type 'tosca.nodes.nfv.Sap' translated into the following resource(s):
  #

  sap_data:
    type: OS::Neutron::Router
#   properties:
#     admin_state_up: true # default value
#     distributed: false # default value?
#     ha: false# default value?
#     l3_agent_ids: [] # default value
#     name: sap_data  # set by Heat engine
#     tags: [] # default value
#     value_specs: {} # default value
    metadata:
      tosca.type: tosca.nodes.nfv.Sap
      layer_protocols: ['ipv4']
      role: root

  sap_data_internal_virtual_link_ipv4_port:
    type: OS::Neutron::Port
    properties:
      network: { get_resource: vl_data_network }
#     admin_state_up: true  # default value
#     allowed_address_pairs: []  # default value
#     binding:vnic_type: normal # TODO
#     device_id: "" # default value
#     device_owner: "" # default value
#     dns_name: "" # TODO
      fixed_ips:
        - subnet: { get_resource: vl_data_network_subnet_ipv4 }
#     mac_address: MAC_ADDRESS
#     name: # set by Heat Engine
#     port_security_enabled: true # default value
      qos_policy: { get_resource: vl_data_network_root_qos_policy }
#     security_groups: [ SECURITY_GROUP ]
#     tags: [] # default value
#     value_specs: {} # default value

  sap_data_internal_virtual_link_ipv4:
    type: OS::Neutron::RouterInterface
    properties:
      router: { get_resource: sap_data }
      port: { get_resource: sap_data_internal_virtual_link_ipv4_port }

  sap_data_external_virtual_link_ipv4_port:
    type: OS::Neutron::Port
    properties:
      network: { get_resource: None }
#     admin_state_up: true  # default value
#     allowed_address_pairs: []  # default value
#     binding:vnic_type: normal # TODO
#     device_id: "" # default value
#     device_owner: "" # default value
#     dns_name: "" # TODO
      fixed_ips:
        - subnet: { get_resource: None_subnet_ipv4 }
#     mac_address: MAC_ADDRESS
#     name: # set by Heat Engine
#     port_security_enabled: true # default value
      qos_policy: { get_resource: None_root_qos_policy }
#     security_groups: [ SECURITY_GROUP ]
#     tags: [] # default value
#     value_specs: {} # default value

  sap_data_external_virtual_link_ipv4:
    type: OS::Neutron::RouterInterface
    properties:
      router: { get_resource: sap_data }
      port: { get_resource: sap_data_external_virtual_link_ipv4_port }

  #
  # Policy 'ns_instantiation_levels' of type 'tosca.policies.nfv.NsInstantiationLevels' translated into the following resource(s):
  #
  # TODO: Undefined translation for node 'ns_instantiation_levels' of type 'tosca.policies.nfv.NsInstantiationLevels'!

  #
  # Policy 'vnf1_mapping' of type 'tosca.policies.nfv.VnfToLevelMapping' translated into the following resource(s):
  #
  # TODO: Undefined translation for node 'vnf1_mapping' of type 'tosca.policies.nfv.VnfToLevelMapping'!

  #
  # Policy 'vnf2_mapping' of type 'tosca.policies.nfv.VnfToLevelMapping' translated into the following resource(s):
  #
  # TODO: Undefined translation for node 'vnf2_mapping' of type 'tosca.policies.nfv.VnfToLevelMapping'!

  #
  # Policy 'cnf_mapping' of type 'tosca.policies.nfv.VnfToLevelMapping' translated into the following resource(s):
  #
  # TODO: Undefined translation for node 'cnf_mapping' of type 'tosca.policies.nfv.VnfToLevelMapping'!

  #
  # Policy 'ns_scaling_aspects' of type 'tosca.policies.nfv.NsScalingAspects' translated into the following resource(s):
  #
  # TODO: Undefined translation for node 'ns_scaling_aspects' of type 'tosca.policies.nfv.NsScalingAspects'!

