@startuml
skinparam componentStyle uml2
skinparam component {
  backgroundColor<<relationship>> White
}

component ": tosca.nodes.nfv.Proxy_CNF" <<node>> as substitution_mappings {
component "extCp_mgmt: VnfExtCp" <<node>> as node_extCp_mgmt
component ": VirtualLinksTo" <<relationship>> as node_extCp_mgmt_internal_virtual_link_relationship0
interface " " as node_extCp_mgmt_internal_virtual_link_relationship0_source
node_extCp_mgmt_internal_virtual_link_relationship0_source -- node_extCp_mgmt_internal_virtual_link_relationship0
node_extCp_mgmt --( node_extCp_mgmt_internal_virtual_link_relationship0_source : internal_virtual_link

component "extCp_data: VnfExtCp" <<node>> as node_extCp_data
component ": VirtualLinksTo" <<relationship>> as node_extCp_data_internal_virtual_link_relationship0
interface " " as node_extCp_data_internal_virtual_link_relationship0_source
node_extCp_data_internal_virtual_link_relationship0_source -- node_extCp_data_internal_virtual_link_relationship0
node_extCp_data --( node_extCp_data_internal_virtual_link_relationship0_source : internal_virtual_link

component "intVL_mgmt: VnfVirtualLink" <<node>> as node_intVL_mgmt
interface "virtual_linkable" as node_intVL_mgmt_virtual_linkable
node_intVL_mgmt_virtual_linkable -- node_intVL_mgmt

component "intVL_data: VnfVirtualLink" <<node>> as node_intVL_data
interface "virtual_linkable" as node_intVL_data_virtual_linkable
node_intVL_data_virtual_linkable -- node_intVL_data

component "vdu_proxy_frontend: Compute" <<node>> as node_vdu_proxy_frontend
interface "virtual_binding" as node_vdu_proxy_frontend_virtual_binding
node_vdu_proxy_frontend_virtual_binding -- node_vdu_proxy_frontend
interface "virtual_compute" as node_vdu_proxy_frontend_virtual_compute
node_vdu_proxy_frontend_virtual_compute -- node_vdu_proxy_frontend

component "vdu_proxy_backend: Compute" <<node>> as node_vdu_proxy_backend
interface "virtual_binding" as node_vdu_proxy_backend_virtual_binding
node_vdu_proxy_backend_virtual_binding -- node_vdu_proxy_backend
interface "virtual_compute" as node_vdu_proxy_backend_virtual_compute
node_vdu_proxy_backend_virtual_compute -- node_vdu_proxy_backend

component "cp_proxy_frontend_mgmt: VduCp" <<node>> as node_cp_proxy_frontend_mgmt
component ": VirtualBindsTo" <<relationship>> as node_cp_proxy_frontend_mgmt_virtual_binding_relationship0
interface " " as node_cp_proxy_frontend_mgmt_virtual_binding_relationship0_source
node_cp_proxy_frontend_mgmt_virtual_binding_relationship0_source -- node_cp_proxy_frontend_mgmt_virtual_binding_relationship0
node_cp_proxy_frontend_mgmt --( node_cp_proxy_frontend_mgmt_virtual_binding_relationship0_source : virtual_binding
component ": VirtualLinksTo" <<relationship>> as node_cp_proxy_frontend_mgmt_virtual_link_relationship1
interface " " as node_cp_proxy_frontend_mgmt_virtual_link_relationship1_source
node_cp_proxy_frontend_mgmt_virtual_link_relationship1_source -- node_cp_proxy_frontend_mgmt_virtual_link_relationship1
node_cp_proxy_frontend_mgmt --( node_cp_proxy_frontend_mgmt_virtual_link_relationship1_source : virtual_link

component "cp_proxy_frontend_data: VduCp" <<node>> as node_cp_proxy_frontend_data
component ": VirtualBindsTo" <<relationship>> as node_cp_proxy_frontend_data_virtual_binding_relationship0
interface " " as node_cp_proxy_frontend_data_virtual_binding_relationship0_source
node_cp_proxy_frontend_data_virtual_binding_relationship0_source -- node_cp_proxy_frontend_data_virtual_binding_relationship0
node_cp_proxy_frontend_data --( node_cp_proxy_frontend_data_virtual_binding_relationship0_source : virtual_binding
component ": VirtualLinksTo" <<relationship>> as node_cp_proxy_frontend_data_virtual_link_relationship1
interface " " as node_cp_proxy_frontend_data_virtual_link_relationship1_source
node_cp_proxy_frontend_data_virtual_link_relationship1_source -- node_cp_proxy_frontend_data_virtual_link_relationship1
node_cp_proxy_frontend_data --( node_cp_proxy_frontend_data_virtual_link_relationship1_source : virtual_link

component "cp_proxy_backend_mgmt: VduCp" <<node>> as node_cp_proxy_backend_mgmt
component ": VirtualBindsTo" <<relationship>> as node_cp_proxy_backend_mgmt_virtual_binding_relationship0
interface " " as node_cp_proxy_backend_mgmt_virtual_binding_relationship0_source
node_cp_proxy_backend_mgmt_virtual_binding_relationship0_source -- node_cp_proxy_backend_mgmt_virtual_binding_relationship0
node_cp_proxy_backend_mgmt --( node_cp_proxy_backend_mgmt_virtual_binding_relationship0_source : virtual_binding
component ": VirtualLinksTo" <<relationship>> as node_cp_proxy_backend_mgmt_virtual_link_relationship1
interface " " as node_cp_proxy_backend_mgmt_virtual_link_relationship1_source
node_cp_proxy_backend_mgmt_virtual_link_relationship1_source -- node_cp_proxy_backend_mgmt_virtual_link_relationship1
node_cp_proxy_backend_mgmt --( node_cp_proxy_backend_mgmt_virtual_link_relationship1_source : virtual_link

component "cp_proxy_backend_data: VduCp" <<node>> as node_cp_proxy_backend_data
component ": VirtualBindsTo" <<relationship>> as node_cp_proxy_backend_data_virtual_binding_relationship0
interface " " as node_cp_proxy_backend_data_virtual_binding_relationship0_source
node_cp_proxy_backend_data_virtual_binding_relationship0_source -- node_cp_proxy_backend_data_virtual_binding_relationship0
node_cp_proxy_backend_data --( node_cp_proxy_backend_data_virtual_binding_relationship0_source : virtual_binding
component ": VirtualLinksTo" <<relationship>> as node_cp_proxy_backend_data_virtual_link_relationship1
interface " " as node_cp_proxy_backend_data_virtual_link_relationship1_source
node_cp_proxy_backend_data_virtual_link_relationship1_source -- node_cp_proxy_backend_data_virtual_link_relationship1
node_cp_proxy_backend_data --( node_cp_proxy_backend_data_virtual_link_relationship1_source : virtual_link

node_extCp_mgmt_internal_virtual_link_relationship0 --( node_intVL_mgmt_virtual_linkable
node_extCp_data_internal_virtual_link_relationship0 --( node_intVL_data_virtual_linkable
node_cp_proxy_frontend_mgmt_virtual_binding_relationship0 --( node_vdu_proxy_frontend_virtual_binding
node_cp_proxy_frontend_mgmt_virtual_link_relationship1 --( node_intVL_mgmt_virtual_linkable
node_cp_proxy_frontend_data_virtual_binding_relationship0 --( node_vdu_proxy_frontend_virtual_binding
node_cp_proxy_frontend_data_virtual_link_relationship1 --( node_intVL_data_virtual_linkable
node_cp_proxy_backend_mgmt_virtual_binding_relationship0 --( node_vdu_proxy_backend_virtual_binding
node_cp_proxy_backend_mgmt_virtual_link_relationship1 --( node_intVL_mgmt_virtual_linkable
node_cp_proxy_backend_data_virtual_binding_relationship0 --( node_vdu_proxy_backend_virtual_binding
node_cp_proxy_backend_data_virtual_link_relationship1 --( node_intVL_data_virtual_linkable
agent policy_scaling_aspects <<policy>> #AliceBlue [
ScalingAspects
---
.. properties ..
aspects = {'proxy_frontend_scaling': {'name': 'pro[[{proxy_frontend_scaling: \n  name: 'proxy_frontend_scaling_aspect'\n  description: 'Horizontal Pod Autoscaling for Proxy frontend'\n  max_scale_level: 7\n  step_deltas: \n    - 'delta_1'\nproxy_backend_scaling: \n  name: 'proxy_backend_scaling_aspect'\n  description: 'Horizontal Pod Autoscaling for Proxy backend'\n  max_scale_level: 5\n  step_deltas: \n    - 'delta_1'} ...]]
]
agent policy_vdu_proxy_frontend_initial_delta <<policy>> #AliceBlue [
VduInitialDelta
---
.. properties ..
initial_delta = {'number_of_instances': 3}
]
policy_vdu_proxy_frontend_initial_delta -up-> node_vdu_proxy_frontend
agent policy_vdu_proxy_frontend_scaling_delta <<policy>> #AliceBlue [
VduScalingAspectDeltas
---
.. properties ..
aspect = 'proxy_frontend_scaling'
deltas = {'delta_1': {'number_of_instances': 1}}
]
policy_vdu_proxy_frontend_scaling_delta -up-> node_vdu_proxy_frontend
agent policy_vdu_proxy_backend_initial_delta <<policy>> #AliceBlue [
VduInitialDelta
---
.. properties ..
initial_delta = {'number_of_instances': 3}
]
policy_vdu_proxy_backend_initial_delta -up-> node_vdu_proxy_backend
agent policy_vdu_proxy_backend_scaling_delta <<policy>> #AliceBlue [
VduScalingAspectDeltas
---
.. properties ..
aspect = 'proxy_backend_scaling'
deltas = {'delta_1': {'number_of_instances': 1}}
]
policy_vdu_proxy_backend_scaling_delta -up-> node_vdu_proxy_backend
agent policy_instantiation_levels <<policy>> #AliceBlue [
InstantiationLevels
---
.. properties ..
levels = {'small': {'description': 'Small instant[[{small: \n  description: 'Small instantiation level'\n  scale_info: \n    proxy_frontend_scaling: \n      scale_level: 0\n    proxy_backend_scaling: \n      scale_level: 0\nmedium: \n  description: 'Medium instantiation level'\n  scale_info: \n    proxy_frontend_scaling: \n      scale_level: 3\n    proxy_backend_scaling: \n      scale_level: 2\nlarge: \n  description: 'Large instantiation level'\n  scale_info: \n    proxy_frontend_scaling: \n      scale_level: 7\n    proxy_backend_scaling: \n      scale_level: 5} ...]]
default_level = 'small'
]
agent policy_vdu_proxy_frontend_instantiation_levels <<policy>> #AliceBlue [
VduInstantiationLevels
---
.. properties ..
levels = {'small': {'number_of_instances': 3}, 'm[[{small: \n  number_of_instances: 3\nmedium: \n  number_of_instances: 6\nlarge: \n  number_of_instances: 10} ...]]
]
policy_vdu_proxy_frontend_instantiation_levels -up-> node_vdu_proxy_frontend
agent policy_vdu_proxy_backend_instantiation_levels <<policy>> #AliceBlue [
VduInstantiationLevels
---
.. properties ..
levels = {'small': {'number_of_instances': 3}, 'm[[{small: \n  number_of_instances: 3\nmedium: \n  number_of_instances: 5\nlarge: \n  number_of_instances: 8} ...]]
]
policy_vdu_proxy_backend_instantiation_levels -up-> node_vdu_proxy_backend
agent policy_proxy_frontend_anti_affinity <<policy>> #AliceBlue [
AntiAffinityRule
---
.. properties ..
scope = 'nfvi_node'
]
policy_proxy_frontend_anti_affinity -up-> node_vdu_proxy_frontend
agent policy_proxy_backend_anti_affinity <<policy>> #AliceBlue [
AntiAffinityRule
---
.. properties ..
scope = 'nfvi_node'
]
policy_proxy_backend_anti_affinity -up-> node_vdu_proxy_backend
}
label "virtual_link_external" as substitution_mappings_virtual_link_external
node_extCp_data "external_virtual_link" --( substitution_mappings_virtual_link_external
@enduml
